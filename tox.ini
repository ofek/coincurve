[tox]
skip_missing_interpreters = true
envlist =
    py{27,35,36,37},
    pypy3,
    style

[testenv]
skip_install = true
passenv = *
deps =
    coverage
    pytest
commands =
    python setup.py build_ext --inplace --force
    python setup.py develop
    coverage run --parallel-mode -m pytest {posargs}
    coverage combine --append
    coverage report -m

[testenv:style]
deps = black
commands = black --check --diff .
